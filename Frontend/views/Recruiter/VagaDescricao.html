<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="../../styles/styleUsers/usuarioCandidata2.css">
    <link rel="stylesheet" href="../../styles/styleRecruiter/VagaXCadastrada.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <title>brazilians in tech</title>
</head>

<body onload="loadVagaInformation()">

    <nav> <img src="../../images/logo.svg" alt="Logo da brazilians in tech"></nav>
    <div class="row">
        <div class="col-12 col-sm-12 col-md-3 backgroundVaga">

        </div>

        <div class="col">
            <div class="container">
                <div class="header">
                    <h1 id="tituloVaga"></h1>
                    <p id="error" style="color:red ;" class="d-flex justify-content-center"></p>
                </div>

                <div class="body">
                    <h4>Descrição da vaga</h4>
                    <textarea disabled id="descricaoVaga" class="paragrafo"
                        style="width: 75%; padding: 10px;"></textarea>

                    <h4>Salário:</h4>
                    <input type="text" id="salario" disabled class="form-control">

                    <h4>Localização: </h4>
                    <input type="text" id="localizacao" disabled class="form-control">

                    <h4>Modalidade: </h4>
                    <select class="form-select w-75 mb-5" disabled id="modalidade">
                        <option value='Presencial'>Presencial</option>
                        <option value='Remoto'>Remoto</option>
                        <option value='Híbrido'>Híbrido</option>
                    </select>

                    <h4 class="titles">Hard Skills: </h4>

                    <div class="row mt-4 hardSkillsContainer">
                        <p id="errorHard" style="color: yellow;" class="d-flex justify-content-center mb-0"></p>
                        <input placeholder="Digite a habilidade desejada e pressione ENTER" type="text"
                            name="Hard-Skills" list="hardskillslist" id="hard-skills" disabled
                            class="w-75 form-control">


                        <datalist id="hardskillslist">
                            <option value="JavaScript"></option>
                            <option value="HTML/CSS"></option>
                            <option value="Python"></option>
                            <option value="SQL"></option>
                            <option value="Java"></option>
                            <option value="Node.js"></option>
                            <option value="TypeScript"></option>
                            <option value="C#"></option>
                            <option value="Bash/Shell"></option>
                            <option value="C++"></option>
                            <option value="PHP"></option>
                            <option value="PowerShell"></option>
                            <option value="C"></option>
                            <option value="Go"></option>
                            <option value="Kotlin"></option>
                            <option value="Rust"></option>
                            <option value="Ruby"></option>
                            <option value="Assembly"></option>
                            <option value="Swift"></option>
                            <option value="R"></option>
                            <option value="VBA"></option>
                            <option value="Matlab"></option>
                            <option value="Groovy"></option>
                            <option value="Objective-C"></option>
                            <option value="Scala"></option>
                            <option value="Perl"></option>
                            <option value="Haskell"></option>
                            <option value="Delphi"></option>
                            <option value="Clojure"></option>
                            <option value="Elixir"></option>
                        </datalist>
                    </div>

                    <div id="hardskillsContainer" class="mb-3 mt-3 row espacamento"></div>

                    <h4 class="titles">Soft Skills: </h4>
                    <div class="row mt-4 softSkillsContainer">
                        <p id="errorSoft" style="color: yellow;" class="d-flex justify-content-center mb-0"></p>
                        <input placeholder="Digite a habilidade desejada e pressione ENTER" type="text"
                            name="Soft-Skills" list="softSkillsList" id="soft-skills" class="form-control " disabled>
                        <br>
                        <div></div>
                        <datalist id="softSkillsList">
                            <option value='Boa comunicação verbal'>
                            <option value='Boa comunicação escrita'>
                            <option value='Trabalho em equipe'>
                            <option value='Solução de problemas'>
                            <option value='Gerenciamento de tempo'>
                            <option value='Pensamento crítico'>
                            <option value='Boa tomada de decisões'>
                            <option value='Organização'>
                            <option value='Gerenciamento de estresse'>
                            <option value='Adaptabilidade'>
                            <option value='Gestão e resolução de conflitos'>
                            <option value='Criatividade'>
                            <option value='Desenvoltura'>
                            <option value='Persuasão'>
                            <option value='Abertura a críticas'>
                            <option value='Atenção a detalhes'>
                            <option value='Ética no trabalho'>
                            <option value='Resiliência'>
                            <option value='Definição de metas'>
                            <option value='Otimismo'>
                            <option value='Imaginação'>
                            <option value='Inovação'>
                            <option value='Autenticidade'>
                            <option value='Generosidade'>
                            <option value='Tolerância'>
                            <option value='Humor'>
                            <option value='Diplomacia'>
                            <option value='Disciplina'>
                            <option value='Comprometimento'>
                            <option value='Responsabilidade'>
                            <option value='Introspecção'>
                            <option value='Despersonalização'>
                            <option value='Inteligência emocional'>
                            <option value='Capacidade de lidar com a diversidade'>
                        </datalist>
                    </div>
                    <div id="softskillsContainer" class="mb-3 mt-3 row espacamento"></div>

                    <div class="row actions">
                        <a class="botao" href="./companyDashboard.html"
                            style="color:black ; font-size: 26px;">Voltar</a>
                        <button id="editButton" class="botao btn btn-secondary" onclick="edit()">EDITAR VAGA</button>
                        <button id="delete" class="botao btn btn-danger">EXCLUIR VAGA</button>
                    </div>

                    <h4 class="textoFinal">Candidatas que se aplicaram</h4>
                    <div id="AplicantesCards" class="row">

                    </div>

                </div>
            </div>
        </div>
    </div>

    <div class="backPopup" id="popupPai">
        <div class="popup" id="popup">
            <img src="../../images/animado.png">
            <h2>Tem certeza que quer deletar essa vaga?</h2>
            <p id="idvaga"></p>

            <button type="button" id="delete1" style="background-color:red ;">Confirmar escolha</button>
            <button type="button" onclick="closePopup()" style="background-color:green ;">Volta</button>
        </div>
    </div>
    <script>

        function openPopup(a) {
            window.scroll(0, 0)
            $('body').attr('class', 'bg-image');
            $("#popupPai").attr("class", "backPopup")
            // document.getElementById("delete").setAttribute("onclick",delvaga(a))
            popup.classList.add("open-popup");


            $("#delete1").attr("onclick", `delvaga(${a})`)
        }

        function closePopup() {
            $("#popupPai").attr("class", "popupclose")
        }

        function edit() {

            const selects = document.querySelectorAll('select, input, textarea')
            // const inputs = document.querySelectorAll('input')
            const editButton = document.querySelector('#editButton')

            const divHardSkills = document.querySelector('#hardskills')
            const divSoftSkills = document.querySelector('#softskills')

            const input = document.createElement('input')

            for (let i = 0; i < selects.length; i++) {
                selects[i].disabled = false
            }

            editButton.setAttribute("class", "saveButton botao")
            editButton.setAttribute("onclick", "save()")
            editButton.innerHTML = 'SALVAR'
        }



        function save() {

            const selects = document.querySelectorAll('select, input, textarea')
            const editButton = document.querySelector('#editButton')

            for (let i = 0; i < selects.length; i++) { selects[i].disabled = true } // const

            const descricao = document.querySelector('#descricaoVaga').value
            const salario = document.querySelector('#salario').value
            const localizacao = document.querySelector('#localizacao').value
            const modalidade = document.querySelector('#modalidade').value

            let softSkills = []
            const oldSoftSkillsSpans = document.querySelector('#softskillsContainer').querySelectorAll('span')
            const newSoftSkillsSpans = document.querySelectorAll('#softskills')

            for (let i = 0; i < oldSoftSkillsSpans.length; i++) {
                softSkills.push(oldSoftSkillsSpans[i].innerText)
            }

            for (let i = 0; i < newSoftSkillsSpans.length; i++) {
                softSkills.push(newSoftSkillsSpans[i].innerText)
            }

            let hardSkills = []
            const oldHardSkillsSpans = document.querySelector('#hardskillsContainer').querySelectorAll('span')
            const newHardSkillsSpans = document.querySelectorAll('#hardskills')

            for (let i = 0; i < oldHardSkillsSpans.length; i++) {
                hardSkills.push(oldHardSkillsSpans[i].innerText)
            }

            for (let i = 0; i < newHardSkillsSpans.length; i++) {
                hardSkills.push(newHardSkillsSpans[i].innerText)
            }

            let softSkillsDB = softSkills.toString()
            let hardSkillsDB = hardSkills.toString()

            editVaga(softSkillsDB, descricao, salario, hardSkillsDB, modalidade, localizacao)

            editButton.setAttribute("class", "botao btn btn-secondary")
            editButton.setAttribute("onclick", "edit()")
            editButton.innerHTML = 'EDITAR VAGA'
        }

        function delvaga(id_vaga) {
            $.ajax({
                url: "/vaga/deleteVagas",
                method: "DELETE",
                data: {
                    id_vaga: id_vaga
                },
                success: function () {
                    window.location.replace("/views/Recruiter/companyDashboard.html")
                },
                error: function () {

                }
            })

        }





    </script>

    <script src="../../script/dashboard-recruit.js"></script>
    <script src="../../script/tagInputs/hardSkillsTagInput.js"></script>
    <script src="../../script/tagInputs/softSkillsTagInput.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
        integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous">
        </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
        integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous">
        </script>

</body>

</html>